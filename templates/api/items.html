<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Items (API)</title>
  <style>body{font-family:system-ui;margin:20px} input,button{margin:4px}</style>
</head>
<body>
  <h1>API Items</h1>
  <div>
    <input id="title" placeholder="Title">
    <input id="content" placeholder="Content">
    <button id="create">Create via API</button>
  </div>
  <ol id="items"></ol>

  <script>
    const api = '/api/items/';
    async function refresh(){
      const r = await fetch(api);
      const data = await r.json();
      const ol = document.getElementById('items');
      ol.innerHTML = '';
      data.forEach(it=>{
        const el = document.createElement('li');
        el.innerHTML = `<strong>${it.title}</strong> â€” ${it.content}
          <button data-id="${it.id}" class="remove">Remove</button>`;
        ol.appendChild(el);
      });
      document.querySelectorAll('.remove').forEach(b=>b.onclick = async e=>{
        await fetch(api+e.target.dataset.id+'/', {method:'DELETE'});
        refresh();
      });
    }
    document.getElementById('create').onclick = async ()=>{
      await fetch(api, {
        method:'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({title: document.getElementById('title').value, content: document.getElementById('content').value})
      });
      document.getElementById('title').value=''; document.getElementById('content').value='';
      refresh();
    };
    refresh();
  </script>
</body>
</html>